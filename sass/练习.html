<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,minimum-scale=1,
    maximum-scale=1,user-scalable=no" />
    <title>IScroll练习</title>
    <link rel="stylesheet" href="css/sass.css">
    <script src="js/iscroll-probe.js"></script>
    <script src="js/jquery-3.4.1.js"></script>
</head>
<body>
       <div class="head">内容</div>
       <div class="top">下拉刷新</div>
       <div class="box">
           <div class="con">
               <button>点击有惊喜</button>
               <h3></h3>
           </div>
       </div>
       <div class="bottom">上拉刷新</div>
       <div class="foot">尾部</div>

</body>
</html>
      <script>
          document.addEventListener('touchmove', function (event) {
              event.preventDefault();
          },{passive:false})
          var bb=new IScroll('.box',{});
          document.querySelector('button').onclick=function () {
              var htm=new XMLHttpRequest();
              htm.open('GET','惊喜.html',true);
              htm.send();
              htm.onreadystatechange= function () {
                  if(htm.readyState==4&&htm.status==200){
                      var da=htm.responseText;
                      document.querySelector('h3').innerHTML=da;
                  }
              }
          }
          var t=document.querySelector('.top');
          var bt=document.querySelector('.bottom');
          document.addEventListener('touchmove', function () {
             if(bb.startY>20){
                 t.style.display='block';
             }
              if(bb.startY<bb.maxScrollY-20){
                  bt.style.display='block';
              }
          })
          document.addEventListener('touchend', function () {
              if(bb.startY>20){
                  t.innerHTML='正在刷新中...';
                  setTimeout(function () {
                      t.innerHTML='刷新成功...';
                      setTimeout(function () {
                          t.innerHTML='OK';
                          setTimeout(function () {
                              t.style.display='none';
                          },1000)
                      },1000)
                  },2000)
              }
              if(bb.startY<bb.maxScrollY-20){
                  bt.innerHTML='正在刷新中...';
                  setTimeout(function () {
                      bt.innerHTML='刷新成功...';
                      setTimeout(function () {
                          bt.style.display='none';
                      },1000)
                  },2000)
              }
          })

      </script>